<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>スレッド検索</title>
    <script>
        function validateForm() {
            var keyword = escapeHtml(document.forms["searchForm"]["keyword"].value);
            var searchType = document.querySelector('input[name="searchType"]:checked');

            // 検索キーワードのバリデーション
            if (keyword.trim() === "") {
                alert("検索キーワードを入力してください。");
                return false;
            }

            // ラジオボタンの選択を確認
            if (searchType === null) {
                alert("検索タイプを選択してください。");
                return false;
            }

            // スレッドIDで検索が選択されている場合のバリデーション
            if (searchType.value === "threadId") {
                // 数値のみを受け入れる正規表現パターン
                var numericPattern = /^[0-9]+$/;

                // 入力値が数値のみかどうかをチェック
                if (!numericPattern.test(keyword)) {
                    alert("スレッドIDで検索する場合は数値データを入力してください。");
                    return false;
                }
            }
        }

        function escapeHtml(unsafe) {
            return unsafe
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }
    </script>
    <link href="../CSS/style.css" rel="stylesheet" type="text/css">
</head>
<body>
    <h1>スレッド検索</h1>
    <a id="TOP"></a>
    <nav>
        <ul class="menu">
            <li> 
                <a href="/JavaBoard_styET/TopServlet" class="link1">スレッド一覧へ</a>
                <ul class="menu-second"></ul>
            </li>
            <li>
                <a href="/JavaBoard_styET/createNewThread" class="link1">新規スレッド作成</a>
                <ul class="menu-second"></ul>
            </li>
        </ul>
    </nav>
    <form name="searchForm" action="/JavaBoard_styET/thread/ThreadSearchServlet" method="get" onsubmit="return validateForm()">
        <table class="table-createTable">
            <tr>
                <td class="td-createTable"><input type="text" name="keyword" placeholder="検索キーワードを入力してください"></td>
            </tr>
            <tr>
                <td class="td-createTable">
                    <input type="radio" id="threadTitle" name="searchType" value="threadTitle" checked>
                    <label for="threadTitle" style="text-align: left;">スレッド名で検索</label>
                </td>
            </tr>
            <tr>
                <td class="td-createTable">
                    <input type="radio" id="creatorName" name="searchType" value="creatorName">
                    <label for="creatorName" style="text-align: left;">スレッド作成者名で検索</label>
                </td>
            </tr>
            <tr>
                <td class="td-createTable">
                    <input type="radio" id="postUserName" name="searchType" value="posterName">
                    <label for="postUserName" style="text-align: left;">投稿者名で検索</label>
                </td>
            </tr>
            <tr>
                <td class="td-createTable">
                    <input type="radio" id="threadId" name="searchType" value="threadId">
                    <label for="threadId" style="text-align: left;">スレッドIDで検索</label>
                </td>
            </tr>
            <tr>
                <td class="td-createTable">
                    <input type="radio" id="content" name="searchType" value="content">
                    <label for="content" style="text-align: left;">本文で検索</label>
                </td>
            </tr>
            <tr>
                <td class="td-createTable"><button type="submit">検索</button></td>
            </tr>
        </table>
    </form>
</body>
<footer>
    <nav>
       <ul class="menu">
            <li> 
                <a href="/JavaBoard_styET/TopServlet" class="link1">スレッド一覧へ</a>
                <ul class="menu-second"></ul>
            </li>
            <li>
                <a href="/JavaBoard_styET/createNewThread" class="link1">新規スレッド作成</a>
                <ul class="menu-second"></ul>
            </li>
        </ul>
    </nav>
</footer>
</html>
