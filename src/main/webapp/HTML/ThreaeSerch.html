<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>掲示板検索</title>
    <script>
        function validateForm() {
            var keyword = escapeHtml(document.forms["searchForm"]["keyword"].value);
            var searchType = document.querySelector('input[name="searchType"]:checked');

            // 検索キーワードのバリデーション
            if (keyword.trim() === "") {
                alert("検索キーワードを入力してください。");
                return false;
            }

            // ラジオボタンの選択を確認
            if (searchType === null) {
                alert("検索タイプを選択してください。");
                return false;
            }

            // スレッドIDで検索が選択されている場合のバリデーション
            if (searchType.value === "threadId") {
                // 数値のみを受け入れる正規表現パターン
                var numericPattern = /^[0-9]+$/;

                // 入力値が数値のみかどうかをチェック
                if (!numericPattern.test(keyword)) {
                    alert("スレッドIDで検索する場合は数値データを入力してください。");
                    return false;
                }
            }
        }

        function escapeHtml(unsafe) {
            return unsafe
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }
    </script>
</head>
<body>
    <h1>掲示板検索</h1>
    <form name="searchForm" action="/JavaBoard_styET/thread/ThreadSearchServlet" method="get" onsubmit="return validateForm()">
        <input type="text" name="keyword" placeholder="検索キーワードを入力してください">
        <br>
        <input type="radio" id="threadTitle" name="searchType" value="threadTitle">
        <label for="threadTitle">スレッド名で検索</label>
        <br>
        <input type="radio" id="creatorName" name="searchType" value="creatorName">
        <label for="creatorName">スレッド作成者名で検索</label>
        <br>
        <input type="radio" id="postUserName" name="searchType" value="posterName">
        <label for="postUserName">投稿者名で検索</label>
        <br>
        <input type="radio" id="threadId" name="searchType" value="threadId">
        <label for="threadId">スレッドIDで検索</label>
        <br>
        <input type="radio" id="content" name="searchType" value="content">
        <label for="content">本文で検索</label>
        <br>
        <button type="submit">検索</button>
    </form>
</body>
</html>
